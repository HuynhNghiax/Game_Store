import{d as u,u as N,b as k,r as a,f as C,j as e,g as A}from"./index-CG5L3lJJ.js";import{G as S}from"./GameCard-DM13tSRw.js";import{C as G}from"./chevron-right-DDSrjpn_.js";import"./star-DF9vgw7w.js";const M=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],P=u("arrow-up-down",M);const _=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],z=u("chevron-left",_);const F=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],L=u("funnel",F);function B(){const g=N(),{items:n,status:i}=k(t=>t.products),[l,b]=a.useState("All"),[c,f]=a.useState("default"),[o,j]=a.useState(1),d=8;a.useEffect(()=>{i==="idle"&&g(C())},[i,g]);const v=a.useMemo(()=>n.length?["All",...new Set(n.map(s=>s.genre))].sort():[],[n]),m=a.useMemo(()=>{let t=l==="All"?[...n]:n.filter(s=>s.genre===l);switch(c){case"price-asc":t.sort((s,r)=>parseFloat(s.price.toString())-parseFloat(r.price.toString()));break;case"price-desc":t.sort((s,r)=>parseFloat(r.price.toString())-parseFloat(s.price.toString()));break;case"name-asc":t.sort((s,r)=>s.name.localeCompare(r.name));break;case"name-desc":t.sort((s,r)=>r.name.localeCompare(s.name));break;case"rating-desc":t.sort((s,r)=>r.rating-s.rating);break}return t},[l,c,n]),h=Math.ceil(m.length/d),y=o*d,w=y-d,x=m.slice(w,y);a.useEffect(()=>{j(1)},[l,c]);const p=t=>{j(t);const s=document.getElementById("main-scroll-container");s&&s.scrollTo({top:0,behavior:"smooth"})};return i==="loading"?e.jsx("div",{className:"flex h-[50vh] items-center justify-center",children:e.jsx(A,{className:"animate-spin text-blue-600",size:40})}):e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Khám phá"}),e.jsxs("div",{className:"flex items-center gap-2 bg-white px-4 py-2 rounded-xl border border-gray-200 shadow-sm",children:[e.jsx(P,{size:16,className:"text-gray-500"}),e.jsx("span",{className:"text-sm text-gray-500 font-medium whitespace-nowrap",children:"Sắp xếp:"}),e.jsxs("select",{value:c,onChange:t=>f(t.target.value),className:"bg-transparent text-sm font-bold text-gray-800 outline-none cursor-pointer",children:[e.jsx("option",{value:"default",children:"Mặc định"}),e.jsx("option",{value:"price-asc",children:"Giá: Thấp đến Cao"}),e.jsx("option",{value:"price-desc",children:"Giá: Cao đến Thấp"}),e.jsx("option",{value:"name-asc",children:"Tên: A - Z"}),e.jsx("option",{value:"name-desc",children:"Tên: Z - A"}),e.jsx("option",{value:"rating-desc",children:"Đánh giá cao nhất"})]})]})]}),e.jsxs("div",{className:"flex gap-3 mb-6 overflow-x-auto pb-2 scrollbar-hide items-center",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-400 pr-2 border-r border-gray-200 mr-2 shrink-0",children:[e.jsx(L,{size:18}),e.jsx("span",{className:"text-xs font-bold uppercase",children:"Lọc"})]}),v.map(t=>e.jsx("button",{onClick:()=>b(t),className:`px-5 py-2 rounded-xl text-xs font-bold uppercase tracking-wider transition-all whitespace-nowrap border ${l===t?"bg-blue-600 text-white border-blue-600 shadow-md":"bg-white text-gray-500 border-gray-200 hover:border-blue-400 hover:text-blue-600"}`,children:t},t))]}),e.jsx("div",{className:"mb-4 text-gray-500 text-sm font-medium flex justify-between items-center",children:e.jsxs("span",{children:["Hiển thị ",x.length," trên tổng số ",m.length," game"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 min-h-[500px] content-start",children:x.length>0?x.map(t=>e.jsx(S,{game:t},t.id)):e.jsxs("div",{className:"text-gray-400 col-span-full text-center py-20 text-lg flex flex-col items-center",children:[e.jsx("p",{children:"Không tìm thấy game nào phù hợp."}),e.jsx("button",{onClick:()=>{b("All"),f("default")},className:"text-blue-600 hover:underline mt-2 text-sm",children:"Xóa bộ lọc"})]})}),h>1&&e.jsxs("div",{className:"flex justify-center items-center gap-2 mt-12 pb-8",children:[e.jsx("button",{onClick:()=>p(o-1),disabled:o===1,className:"w-10 h-10 flex items-center justify-center rounded-lg bg-white border border-gray-200 text-gray-600 hover:bg-blue-50 hover:text-blue-600 disabled:opacity-50 transition shadow-sm",children:e.jsx(z,{size:20})}),[...Array(h)].map((t,s)=>{const r=s+1;return e.jsx("button",{onClick:()=>p(r),className:`w-10 h-10 rounded-lg font-bold text-sm transition shadow-sm border ${o===r?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-600 border-gray-200 hover:bg-blue-50 hover:text-blue-600"}`,children:r},r)}),e.jsx("button",{onClick:()=>p(o+1),disabled:o===h,className:"w-10 h-10 flex items-center justify-center rounded-lg bg-white border border-gray-200 text-gray-600 hover:bg-blue-50 hover:text-blue-600 disabled:opacity-50 transition shadow-sm",children:e.jsx(G,{size:20})})]})]})}export{B as default};
